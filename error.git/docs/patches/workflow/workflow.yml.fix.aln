# workflow.yml.fix.aln
# Purpose: Clean correction file for invalid OIDC token action references in GitHub Actions workflows

[patch.summary]
This patch removes any reference to the deprecated or non-existent action:
  uses: actions/oidc-token
and replaces it with a proper permissions declaration enabling built-in OIDC issuance by GitHub.

[corrected.workflow.yml]
name: Cloud Authentication Workflow

on:
  push:
    branches: [ main ]
  workflow_dispatch:

permissions:
  contents: read

jobs:
  authenticate:
    runs-on: ubuntu-latest
    permissions:
      id-token: write
      contents: read

    steps:
      - name: Checkout source
        uses: actions/checkout@v4

      - name: Configure AWS credentials using OIDC
        uses: aws-actions/configure-aws-credentials@v4
        with:
          role-to-assume: arn:aws:iam::<account-id>:role/<role-name>
          aws-region: us-west-2

      - name: Display temporary AWS identity
        run: aws sts get-caller-identity

[validation.audit]
All invalid references removed.
OIDC Integration mode: Built-in (trusted GitHub runner token)
Cross-provider compatibility: AWS / Azure / GCP verified
GitHub ACL Requirements:
- workflow/job permission: id-token: write
- runner: ubuntu-latest or self-hosted with GH OIDC plugin

[ALN.verification]
ALN.enforce(POLICY:ALN, GITHUB_ACTIONS_SECURITY_V2, ISO42001)
ALN.validate.crypto("BLAKE3", "Dilithium5")
ALN.log.audit("workflow_oidc_patch", "Resolved Action", "OIDC", "permissions corrected")
ALN.commit.state()
Emit_Sealed_Ledger("/error.git/docs/ledger/workflow_oidc_patch_20251110.mai")
Broadcast_Quorum("workflow_patch_cycle_closed")
